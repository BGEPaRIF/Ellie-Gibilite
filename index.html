<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Outil d'√âligibilit√© - BGE PaRIF</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        // import React, { useState } from 'react';
import { AlertCircle, CheckCircle, ChevronRight, RotateCcw, ExternalLink } from 'lucide-react';

const EligibilityTool = () => {
  // Ajout de la police Poppins
  React.useEffect(() => {
    const link = document.createElement('link');
    link.href = 'https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap';
    link.rel = 'stylesheet';
    document.head.appendChild(link);
    document.body.style.fontFamily = "'Poppins', sans-serif";
    
    return () => {
      document.body.style.fontFamily = '';
    };
  }, []);
  const [step, setStep] = useState(0);
  const [answers, setAnswers] = useState({});
  const [results, setResults] = useState(null);

  // Logique conditionnelle pour d√©terminer les questions √† afficher
  const getQuestions = () => {
    const baseQuestions = [
      {
        id: 'entrepriseCreee',
        question: 'Avez-vous d√©j√† cr√©√© votre entreprise ?',
        type: 'radio',
        options: ['Oui', 'Non']
      }
    ];

    // Si entreprise cr√©√©e
    if (answers.entrepriseCreee === 'Oui') {
      baseQuestions.push({
        id: 'typeEntreprise',
        question: 'Quel est le statut juridique de votre entreprise ?',
        type: 'radio',
        options: ['Micro-entreprise', 'Soci√©t√© (SARL, SAS, etc.)']
      });
      
      baseQuestions.push({
        id: 'ageEntreprise',
        question: 'Depuis combien de temps existe-t-elle ?',
        type: 'radio',
        options: ['Moins de 3 ans', 'Plus de 3 ans']
      });

      if (answers.typeEntreprise === 'Soci√©t√© (SARL, SAS, etc.)') {
        baseQuestions.push({
          id: 'caAnnuel',
          question: 'Quel est votre chiffre d\'affaires annuel ?',
          type: 'radio',
          options: ['Moins de 30 000 ‚Ç¨', 'Plus de 30 000 ‚Ç¨']
        });
      }
    }

    // Si entreprise non cr√©√©e
    if (answers.entrepriseCreee === 'Non') {
      baseQuestions.push({
        id: 'stadeProjet',
        question: '√Ä quel stade en est votre projet ?',
        type: 'radio',
        options: ['Id√©e', 'Projet formalis√©', 'Business plan finalis√©']
      });

      if (answers.stadeProjet === 'Projet formalis√©') {
        baseQuestions.push({
          id: 'projetImpact',
          question: 'Votre projet est-il consid√©r√© comme projet √† impact (social et/ou environnemental) ?',
          type: 'radio',
          options: ['Oui', 'Non']
        });
      }

      if (answers.stadeProjet === 'Projet formalis√©' || answers.stadeProjet === 'Business plan finalis√©') {
        baseQuestions.push({
          id: 'activiteReglementee',
          question: 'Votre projet concerne-t-il l\'une des activit√©s suivantes : activit√© lib√©rale r√©glement√©e ou assimil√©e, activit√©s immobili√®res, secteur m√©dical et m√©dico-social, activit√©s financi√®res et d\'assurance, production agricole primaire, p√™che, aquaculture, sylviculture ?',
          type: 'radio',
          options: ['Oui', 'Non']
        });
      }
    }

    // Questions personnelles
    baseQuestions.push({
      id: 'sexe',
      question: 'Vous √™tes :',
      type: 'radio',
      options: ['Une femme', 'Un homme']
    });

    baseQuestions.push({
      id: 'age',
      question: 'Quel est votre √¢ge ?',
      type: 'number',
      placeholder: 'Ex: 30'
    });

    const age = parseInt(answers.age) || 0;
    if (age >= 18 && age <= 30) {
      baseQuestions.push({
        id: 'missionLocale',
        question: '√ätes-vous inscrit(e) aupr√®s d\'une Mission Locale ?',
        type: 'radio',
        options: ['Oui', 'Non']
      });
    }

    baseQuestions.push({
      id: 'codePostal',
      question: 'Quel est votre code postal de r√©sidence ?',
      type: 'text',
      placeholder: 'Ex: 75001'
    });

    baseQuestions.push({
      id: 'qpv',
      question: 'R√©sidez-vous en Quartier Prioritaire de la Ville (QPV) ou dans un rayon de 300 m√®tres autour ?',
      type: 'radio',
      options: ['Oui', 'Non', 'Je ne sais pas'],
      info: 'Vous pouvez v√©rifier sur https://sig.ville.gouv.fr/'
    });

    // Parcours et situation
    baseQuestions.push({
      id: 'niveauEtude',
      question: 'Quel est votre niveau d\'√©tude ?',
      type: 'radio',
      options: ['Inf√©rieur au CAP/BEP', 'CAP/BEP', 'Baccalaur√©at', 'Bac+2 et plus']
    });

    baseQuestions.push({
      id: 'statut',
      question: 'Quel est votre statut actuel ?',
      type: 'checkbox',
      options: ['Demandeur d\'emploi', 'Salari√© √† temps complet', 'Salari√© √† temps partiel', 'B√©n√©ficiaire RSA', 'B√©n√©ficiaire ASS', 'B√©n√©ficiaire AAH']
    });

    if (answers.statut?.includes('Demandeur d\'emploi')) {
      baseQuestions.push({
        id: 'dureeDemandeurEmploi',
        question: 'Depuis combien de temps √™tes-vous demandeur d\'emploi ?',
        type: 'radio',
        options: ['Moins de 12 mois', 'De 12 √† 24 mois', 'Plus de 24 mois']
      });
    }

    baseQuestions.push({
      id: 'inscritFranceTravail',
      question: '√ätes-vous inscrit(e) √† France Travail ?',
      type: 'radio',
      options: ['Oui', 'Non']
    });
  } else if (!isSalariePleinTemps) {
    // Si pas salari√© √† temps complet mais pas demandeur d'emploi non plus
    baseQuestions.push({
      id: 'inscritFranceTravail',
      question: '√ätes-vous inscrit(e) √† France Travail ?',
      type: 'radio',
      options: ['Oui', 'Non']
    });
  }

    // Crit√®res sp√©cifiques
    baseQuestions.push({
      id: 'criteresSociaux',
      question: 'Cochez toutes les situations qui vous concernent :',
      type: 'checkbox',
      options: [
        'Parent isol√©',
        'Sans domicile fixe (SDF)',
        'R√©cemment arriv√© en France',
        'Sortant de l\'ASE (Aide Sociale √† l\'Enfance)',
        'R√©sidence en ZRR (Zone de Revitalisation Rurale)',
        'Aucun de ces crit√®res'
      ]
    });

    baseQuestions.push({
      id: 'handicap',
      question: '√ätes-vous reconnu(e) travailleur(se) en situation de handicap (RQTH) ?',
      type: 'radio',
      options: ['Oui', 'Non']
    });

    if (answers.handicap === 'Oui') {
      baseQuestions.push({
        id: 'inscritCapEmploi',
        question: '√ätes-vous inscrit(e) √† Cap Emploi ?',
        type: 'radio',
        options: ['Oui', 'Non']
      });
    }

    baseQuestions.push({
      id: 'sortieIAE',
      question: '√ätes-vous sorti(e) d\'un dispositif IAE (Insertion par l\'Activit√© √âconomique) depuis moins de 6 mois ?',
      type: 'radio',
      options: ['Oui', 'Non']
    });

    baseQuestions.push({
      id: 'cpf',
      question: 'Disposez-vous de cr√©dits CPF (Compte Personnel de Formation) ?',
      type: 'radio',
      options: ['Oui', 'Non', 'Je ne sais pas'],
      info: 'Pour le d√©couvrir, connectez-vous √† votre espace personnel sur www.moncompteformation.gouv.fr'
    });

    return baseQuestions;
  };

  // Fonction pour rendre les liens et emails cliquables
  const renderClickableText = (text) => {
    if (!text) return null;
    
    // Regex pour d√©tecter les URLs
    const urlRegex = /(https?:\/\/[^\s]+)/g;
    // Regex pour d√©tecter les emails
    const emailRegex = /([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9_-]+)/g;
    
    let parts = [text];
    
    // Remplacer les URLs
    parts = parts.flatMap(part => {
      if (typeof part !== 'string') return part;
      return part.split(urlRegex).map((segment, i) => {
        if (urlRegex.test(segment)) {
          return (
            <a
              key={`url-${i}`}
              href={segment}
              target="_blank"
              rel="noopener noreferrer"
              className="text-blue-600 hover:text-blue-800 underline inline-flex items-center"
            >
              {segment} <ExternalLink size={12} className="ml-1" />
            </a>
          );
        }
        return segment;
      });
    });
    
    // Remplacer les emails
    parts = parts.flatMap(part => {
      if (typeof part !== 'string') return part;
      return part.split(emailRegex).map((segment, i) => {
        if (emailRegex.test(segment)) {
          return (
            <a
              key={`email-${i}`}
              href={`mailto:${segment}`}
              className="text-blue-600 hover:text-blue-800 underline"
            >
              {segment}
            </a>
          );
        }
        return segment;
      });
    });
    
    return <>{parts}</>;
  };

  const calculateEligibility = () => {
    const eligible = [];
    const a = answers;

    // Helper functions
    const isQPV = a.qpv === 'Oui' || a.qpv === 'Je ne sais pas'; // Inclut "Je ne sais pas"
    const isDept75 = a.codePostal?.startsWith('75');
    const isDept93 = a.codePostal?.startsWith('93');
    const isIDF = ['75', '77', '78', '91', '92', '93', '94', '95'].some(d => a.codePostal?.startsWith(d));
    const entrepriseCreee = a.entrepriseCreee === 'Oui';
    const age = parseInt(a.age) || 0;
    const isJeune = age >= 18 && age <= 30;
    const isSenior = age >= 50;
    const isRSA = a.statut?.includes('B√©n√©ficiaire RSA');
    const isASS = a.statut?.includes('B√©n√©ficiaire ASS');
    const isAAH = a.statut?.includes('B√©n√©ficiaire AAH');
    const isDemandeurEmploi = a.statut?.includes('Demandeur d\'emploi');
    const isSalariePleinTemps = a.statut?.includes('Salari√© √† temps complet');
    const isDETLD = a.dureeDemandeurEmploi === 'Plus de 24 mois';
    const isDELD = a.dureeDemandeurEmploi === 'De 12 √† 24 mois';
    const niveauEtudeInferieur = ['Inf√©rieur au CAP/BEP', 'CAP/BEP'].includes(a.niveauEtude);

    // Codes postaux Incubatest
    const codesPostIncubatest = ['95400', '95500', '95720', '95380', '77410', '77290', '77230', '95440', '95190', '95470', '95140', '77990', '95670', '77280', '95700', '95200', '77270', '91120', '91140', '91160', '91190', '91300', '91310', '91320', '91360', '91370', '91400', '91430', '91440', '91460', '91620', '91940', '91800', '91860', '91560', '91210', '91480', '91270', '91330', '75001', '75002', '75003', '75004', '75005', '75006', '75007', '75008', '75009', '75010', '75011', '75012', '75013', '75014', '75015', '75016', '75017', '75018', '75019', '75020'];
    const isVilleIncubatest = codesPostIncubatest.includes(a.codePostal);

    // 1. ACC√âL√âRATEUR EMERGENCE
    if (!entrepriseCreee && 
        (a.stadeProjet === 'Id√©e' || a.stadeProjet === 'Projet formalis√©') && 
        isQPV && 
        !isSalariePleinTemps) {
      eligible.push({
        nom: 'Acc√©l√©rateur √âmergence',
        description: 'Programme d\'accompagnement intensif destin√© aux porteurs de projet au stade de l\'id√©e ou du projet, visant √† structurer, valider et lancer une activit√© entrepreneuriale en un temps record.',
        duree: 'Environ 200 heures sur 6 mois',
        contenu: ['Plus de 100 heures de formation', 'Accompagnement individuel', 'Ateliers collectifs', 'Sessions de mise en r√©seau'],
        enSavoirPlus: 'https://emergence.bge-parif.com',
        procedure: 'Prendre contact avec l\'√©quipe Acc√©l√©rateurs de BGE PaRIF par email : accelerateurs@bge-parif.com',
        note: 'Dispositif s√©lectif - Une s√©lection est effectu√©e apr√®s √©tude du dossier'
      });
    }

    // 2. ACC√âL√âRATEUR CR√âATION INDIVIDUELLE
    if (entrepriseCreee && isQPV) {
      const ageOk = a.ageEntreprise === 'Moins de 3 ans';
      const caOk = a.typeEntreprise === 'Micro-entreprise' || a.caAnnuel === 'Moins de 30 000 ‚Ç¨';
      if (ageOk && caOk) {
        eligible.push({
          nom: 'Acc√©l√©rateur Cr√©ation Individuelle',
          description: 'Programme sur-mesure pour les entrepreneurs en phase de croissance ou de d√©veloppement qui souhaitent structurer leur activit√© et augmenter consid√©rablement leur chiffre d\'affaires.',
          duree: 'Environ 250 heures sur 12 mois',
          contenu: ['Plus de 100 heures de formation', 'Accompagnement individuel', 'Ateliers collectifs', 'Sessions de mise en r√©seau'],
          enSavoirPlus: 'https://creation-individuelle.bge-parif.com/',
          procedure: 'Prendre contact avec l\'√©quipe Acc√©l√©rateurs de BGE PaRIF par email : accelerateurs@bge-parif.com',
          note: 'Dispositif s√©lectif - Une s√©lection est effectu√©e apr√®s √©tude du dossier'
        });
      }
    }

    // 3. FORMATIONS CERTIFIANTES
    if (a.cpf === 'Oui' || a.cpf === 'Je ne sais pas') {
      eligible.push({
        nom: 'Formations Certifiantes',
        description: 'Formations certifiantes destin√©es aux cr√©ateurs, dirigeants ou repreneurs d\'entreprise afin de d√©velopper des comp√©tences entrepreneuriales cl√©s.',
        duree: 'Variable selon la formation (de 14h √† 95h)',
        contenu: [
          'CCPE (Construire et Conduire un Projet Entrepreneurial) - 95h : Formation compl√®te pour √©tudier la faisabilit√© d\'un projet de cr√©ation ou reprise en acqu√©rant une m√©thodologie de conduite de projet',
          'DVRS (D√©veloppez la visibilit√© sur les r√©seaux sociaux) - 14h : Apprenez √† cr√©er un profil, d√©velopper des communaut√©s et g√©rer votre e-r√©putation sur les r√©seaux sociaux',
          'Piloter sa micro-entreprise - 21h : Acqu√©rir les comp√©tences pour la gestion et le d√©veloppement d\'une micro-entreprise (imposition, cotisations, comptabilit√©, pilotage)'
        ],
        procedure: 'Participer √† une r√©union d\'information et s\'inscrire via https://www.bge-parif.com/agenda/ OU prendre RDV : https://calendly.com/bgeparif/conseil-formation-entrepreneurial-1',
        note: a.cpf === 'Je ne sais pas' 
          ? 'Ces formations sont finan√ßables par vos cr√©dits CPF. Pour conna√Ætre votre solde CPF, connectez-vous sur www.moncompteformation.gouv.fr' 
          : 'Formations finan√ßables par vos cr√©dits CPF'
      });
    }

    // 4. G√âN√âRATEUR √Ä IMPACT
    if (!entrepriseCreee && 
        a.stadeProjet === 'Projet formalis√©' && 
        a.projetImpact === 'Oui' && 
        isDept75) {
      eligible.push({
        nom: 'G√©n√©rateur √† Impact',
        description: 'Dispositif d\'accompagnement qui permet de confronter vos id√©es avec des experts, d\'√©valuer toutes les options pour entreprendre autrement et de structurer votre mod√®le √©conomique et strat√©gie.',
        duree: 'Environ 28 heures (ateliers tous les 15 jours + RDV individuels)',
        contenu: ['Ateliers collectifs th√©matiques orient√©s impact', 'Rendez-vous individuels avec expert', 'Construction du business model', '√âlaboration d\'un plan d\'action et pitch-deck'],
        enSavoirPlus: 'https://www.bge-parif.com/structurer-votre-projet/incubateur-parisien-le-generateur-a-impact/',
        procedure: 'Participer √† une r√©union d\'information et s\'inscrire via https://www.bge-parif.com/agenda/',
        note: 'R√©serv√© aux projets √† impact dans le d√©partement 75'
      });
    }

    // 5. INCUBATEST
    if (!entrepriseCreee && 
        (a.stadeProjet === 'Projet formalis√©' || a.stadeProjet === 'Business plan finalis√©') && 
        isVilleIncubatest &&
        a.activiteReglementee === 'Non' &&
        !isSalariePleinTemps) {
      eligible.push({
        nom: 'Incubatest',
        description: 'Les couveuses IncubaTest permettent de tester une activit√© entrepreneuriale dans un cadre s√©curis√©, avec le statut d\'entrepreneur √† l\'essai.',
        duree: 'P√©riode de test de 6 √† 8 mois (15h de RDV individuels + 6 jours de formations)',
        contenu: ['Rendez-vous individuels', 'Ateliers et formations op√©rationnelles', 'Appui au d√©veloppement commercial', 'Communication et gestion'],
        enSavoirPlus: 'https://www.bge-parif.com/tester-votre-activite-en-couveuse-incubatest/',
        procedure: 'Participer √† une r√©union d\'information et s\'inscrire via https://www.bge-parif.com/agenda/',
        note: 'Sous r√©serve que l\'activit√© soit √©ligible. Exclu pour activit√©s r√©glement√©es'
      });
    }

    // 6. CR√âER SA R√âUSSITE
    if (!entrepriseCreee) {
      let criteresN2 = 0;
      
      if (niveauEtudeInferieur) criteresN2++;
      if (isSenior) criteresN2++;
      if (isDELD) criteresN2++;
      if (isQPV || a.criteresSociaux?.includes('R√©sidence en ZRR (Zone de Revitalisation Rurale)')) criteresN2++;
      if (a.criteresSociaux?.includes('Sans domicile fixe (SDF)')) criteresN2++;
      if (a.criteresSociaux?.includes('Parent isol√©')) criteresN2++;
      if (a.criteresSociaux?.includes('R√©cemment arriv√© en France')) criteresN2++;

      const porte1 = (isRSA || isASS || isAAH) || isDETLD;
      const porte2 = criteresN2 >= 3;
      const porte3 = isJeune && (a.missionLocale === 'Oui' || a.criteresSociaux?.includes('Sortant de l\'ASE (Aide Sociale √† l\'Enfance)') || criteresN2 >= 1);
      const porte4 = a.handicap === 'Oui' && (a.inscritCapEmploi === 'Oui' || criteresN2 >= 1);
      const porte5 = a.sortieIAE === 'Oui';

      if (porte1 || porte2 || porte3 || porte4 || porte5) {
        eligible.push({
          nom: 'Cr√©er Sa R√©ussite',
          description: 'Programme d\'accompagnement personnalis√© visant √† am√©liorer l\'acc√®s √† la cr√©ation ou √† la reprise d\'entreprise, en adaptant le parcours aux besoins du b√©n√©ficiaire.',
          duree: 'Jusqu\'√† 10h d\'accompagnement individuel ou collectif',
          contenu: ['Entretiens individuels', 'Ateliers collectifs', 'Compl√©ment ou prolongation d\'un parcours existant'],
          enSavoirPlus: 'https://www.bge-parif.com/structurer-votre-projet/creer-sa-reussite/',
          procedure: 'Contacter BGE PaRIF par email (contact@bge-parif.com) ou t√©l√©phone (01 43 55 09 48)',
          note: 'Programme adapt√© aux publics prioritaires'
        });
      }
    }

    // 7. PDI 75
    if ((isRSA || isASS) && isDETLD && isDept75 && !entrepriseCreee) {
      eligible.push({
        nom: 'PDI 75',
        description: 'Programme d√©partemental d\'insertion visant √† faciliter l\'acc√®s √† l\'emploi et √† la cr√©ation d\'entreprise pour les b√©n√©ficiaires du dispositif.',
        duree: 'Entre 7 √† 8 heures d\'accompagnement individuel',
        contenu: ['Accompagnement individuel par un conseiller expert en cr√©ation d\'entreprise'],
        procedure: 'Se rapprocher de son conseiller insertion ou France Travail, OU contacter BGE PaRIF (contact@bge-parif.com / 01 43 55 09 48)',
        note: 'R√©serv√© aux b√©n√©ficiaires RSA/ASS en DETLD dans le 75'
      });
    }

    // 8. PDI 93
    if ((isRSA || isASS) && isDETLD && isDept93 && !entrepriseCreee) {
      eligible.push({
        nom: 'PDI 93',
        description: 'Programme d√©partemental d\'insertion visant √† faciliter l\'acc√®s √† l\'emploi et √† la cr√©ation d\'entreprise pour les b√©n√©ficiaires du dispositif.',
        duree: 'Entre 7 √† 8 heures d\'accompagnement individuel',
        contenu: ['Accompagnement individuel par un conseiller expert en cr√©ation d\'entreprise'],
        procedure: 'Se rapprocher de son conseiller insertion ou France Travail, OU contacter BGE PaRIF (contact@bge-parif.com / 01 43 55 09 48)',
        note: 'R√©serv√© aux b√©n√©ficiaires RSA/ASS en DETLD dans le 93'
      });
    }

    // 9. ACCOMPAGNEMENT RENFORC√â
    if (!entrepriseCreee && 
        (a.stadeProjet === 'Projet formalis√©' || a.stadeProjet === 'Business plan finalis√©') && 
        isQPV) {
      eligible.push({
        nom: 'Accompagnement Renforc√©',
        description: 'Dispositif visant √† proposer un soutien intensif aux porteurs de projet ou entrepreneurs issus ou implant√©s dans des quartiers prioritaires (QPV) ou zones √©quivalentes.',
        duree: 'Parcours de 10 heures en individuel ou collectif',
        contenu: ['Accompagnement individualis√© renforc√©', '√âlaboration du plan d\'action', 'Strat√©gie commerciale, business plan, choix juridique', 'Gestion d\'entreprise et outils de financement'],
        procedure: 'Contacter BGE PaRIF par email (contact@bge-parif.com) ou t√©l√©phone (01 43 55 09 48)',
        note: 'R√©serv√© aux projets formalis√©s en QPV'
      });
    }

    // 10. AGEFIPH
    if (a.handicap === 'Oui' && !entrepriseCreee && a.stadeProjet !== 'Id√©e') {
      eligible.push({
        nom: 'AGEFIPH',
        description: 'Accompagnement favorisant la cr√©ation d\'entreprise et l\'insertion professionnelle des personnes en situation de handicap dans les entreprises.',
        duree: 'Phase ante-cr√©ation : jusqu\'√† 25h / Phase post-cr√©ation : jusqu\'√† 15h sur 3 ans',
        contenu: ['Accompagnement sur-mesure', 'Montage du projet', 'D√©marrage de l\'activit√© sur 3 ans', 'Suivi post-cr√©ation'],
        procedure: 'Se rapprocher de son conseiller Cap Emploi OU de France Travail en exprimant sa volont√© de b√©n√©ficier du dispositif AGEFIPH',
        note: 'Reconnaissance RQTH obligatoire'
      });
    }

    // 11. PASS ENTREPRENEUR #LEADER 1
    const exclusLeader1 = (a.sexe === 'Un homme' && isSalariePleinTemps && age > 30);
    const activiteExclueLeader = a.activiteReglementee === 'Oui';
    
    if (age >= 18 && isIDF && a.stadeProjet !== 'Id√©e' && !entrepriseCreee && !exclusLeader1 && !activiteExclueLeader) {
      eligible.push({
        nom: 'Pass Entrepreneur #Leader 1',
        description: 'Dispositif d\'accompagnement individuel destin√© aux porteurs de projet en phase de cr√©ation.',
        duree: 'Entre 3 et 7 heures selon votre profil',
        contenu: ['√âlaboration d\'un plan d\'action structur√©', 'D√©finition de la strat√©gie commerciale et business plan', 'Choix du statut juridique, fiscal et social', 'Fondamentaux de la gestion d\'entreprise', 'Solutions de financement'],
        procedure: 'Compl√©ter le formulaire en ligne : https://airtable.com/appH6ML4Ix5hyPhQQ/shrYF8iz0OnKJMYlC',
        note: 'Financ√© par la R√©gion √éle-de-France'
      });
    }

    // 12. PASS ENTREPRENEUR #LEADER 3
    if (entrepriseCreee && isIDF && a.ageEntreprise === 'Moins de 3 ans' && !activiteExclueLeader) {
      eligible.push({
        nom: 'Pass Entrepreneur #Leader 3',
        description: 'Dispositif d\'accompagnement individuel destin√© aux dirigeants d\'entreprise en phase de d√©veloppement.',
        duree: 'Entre 3 et 7 heures selon votre profil',
        contenu: ['Pilotage efficace de l\'entreprise', 'Mise en ≈ìuvre de l\'action commerciale', 'D√©veloppement du r√©seau et opportunit√©s d\'affaires', 'Ma√Ætrise des processus de recrutement', 'S√©curisation du d√©veloppement'],
        procedure: 'Compl√©ter le formulaire en ligne : https://airtable.com/appH6ML4Ix5hyPhQQ/shrQzKhqLuA531uOg',
        note: 'Financ√© par la R√©gion √éle-de-France'
      });
    }

    // 13. ACTIV' CR√âA EMERGENCE
    if (a.inscritFranceTravail === 'Oui' && isDemandeurEmploi && a.stadeProjet === 'Id√©e' && !entrepriseCreee) {
      eligible.push({
        nom: 'Activ\' Cr√©a √âmergence',
        description: 'Programme d\'accompagnement personnalis√© qui permet d\'explorer la cr√©ation ou reprise d\'entreprise comme opportunit√©/solution de retour √† l\'emploi.',
        duree: 'Parcours sur environ 2 mois (6 ateliers + 3 RDV individuels)',
        contenu: ['Entretien de diagnostic', 'Parcours personnalis√©', 'Entretien de bilan', 'Ateliers collectifs', 'Rendez-vous individuels'],
        procedure: 'Contacter son conseiller France Travail OU s\'inscrire depuis son espace personnel sur https://www.francetravail.fr/accueil/',
        note: 'Aide √† consolider une id√©e et √©valuer le profil entrepreneurial'
      });
    }

    setResults(eligible);
  };

  const handleAnswer = (questionId, value) => {
    setAnswers({ ...answers, [questionId]: value });
  };

  const handleNext = () => {
    const questions = getQuestions();
    if (step < questions.length - 1) {
      setStep(step + 1);
    } else {
      calculateEligibility();
    }
  };

  const handlePrevious = () => {
    if (step > 0) {
      setStep(step - 1);
    }
  };

  const handleReset = () => {
    setStep(0);
    setAnswers({});
    setResults(null);
  };

  const questions = getQuestions();
  const currentQuestion = questions[step];
  const isAnswered = answers[currentQuestion?.id] !== undefined && answers[currentQuestion?.id] !== '' && 
                      (Array.isArray(answers[currentQuestion?.id]) ? answers[currentQuestion?.id].length > 0 : true);

  if (results !== null) {
    return (
      <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 p-4">
        <div className="max-w-4xl mx-auto">
          <div className="bg-white rounded-2xl shadow-xl p-8">
            <h1 className="text-3xl font-bold text-gray-800 mb-6">R√©sultats de votre √©ligibilit√©</h1>
            
            {results.length === 0 ? (
              <div className="bg-orange-50 border border-orange-200 rounded-lg p-6 mb-6">
                <div className="flex items-start">
                  <AlertCircle className="text-orange-500 mt-1 mr-3 flex-shrink-0" size={24} />
                  <div>
                    <h3 className="font-semibold text-orange-800 mb-2">Aucun dispositif identifi√©</h3>
                    <p className="text-orange-700">
                      Selon les informations fournies, nous n'avons pas trouv√© de dispositif correspondant exactement √† votre profil. 
                      Nous vous recommandons de contacter directement un conseiller pour √©tudier votre situation plus en d√©tail.
                    </p>
                    <p className="text-orange-700 mt-3">
                      <strong>Contactez BGE PaRIF :</strong><br/>
                      üìß contact@bge-parif.com<br/>
                      üìû 01 43 55 09 48
                    </p>
                  </div>
                </div>
              </div>
            ) : (
              <>
                <div className="bg-green-50 border border-green-200 rounded-lg p-4 mb-6">
                  <div className="flex items-center">
                    <CheckCircle className="text-green-600 mr-2" size={24} />
                    <p className="text-green-800 font-semibold">
                      Vous √™tes √©ligible √† {results.length} dispositif{results.length > 1 ? 's' : ''} !
                    </p>
                  </div>
                </div>

                <div className="space-y-4 mb-8">
                  {results.map((dispositif, index) => (
                    <div key={index} className="bg-white border-2 border-blue-200 rounded-xl p-6 hover:shadow-lg transition-all">
                      <h3 className="text-2xl font-bold text-blue-900 mb-3">{dispositif.nom}</h3>
                      
                      <div className="mb-4">
                        <p className="text-gray-700 leading-relaxed">{dispositif.description}</p>
                      </div>

                      {dispositif.duree && (
                        <div className="mb-3">
                          <span className="inline-block bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-sm font-semibold">
                            ‚è±Ô∏è {dispositif.duree}
                          </span>
                        </div>
                      )}

                      {dispositif.contenu && dispositif.contenu.length > 0 && (
                        <div className="mb-4">
                          <h4 className="font-semibold text-gray-800 mb-2">üìã Contenu :</h4>
                          <ul className="list-disc list-inside space-y-1 text-gray-600 ml-2">
                            {dispositif.contenu.map((item, i) => (
                              <li key={i}>{item}</li>
                            ))}
                          </ul>
                        </div>
                      )}

                      {dispositif.enSavoirPlus && (
                        <div className="mb-4">
                          <a 
                            href={dispositif.enSavoirPlus} 
                            target="_blank" 
                            rel="noopener noreferrer"
                            className="inline-flex items-center text-blue-600 hover:text-blue-800 font-semibold"
                          >
                            üîó En savoir plus <ExternalLink size={16} className="ml-1" />
                          </a>
                        </div>
                      )}

                      {dispositif.procedure && (
                        <div className="mb-4 bg-green-50 border border-green-200 rounded-lg p-4">
                          <h4 className="font-semibold text-green-900 mb-2">üìû Comment s'inscrire :</h4>
                          <div className="text-green-800">{renderClickableText(dispositif.procedure)}</div>
                        </div>
                      )}

                      {dispositif.note && (
                        <div className="bg-amber-50 border border-amber-200 rounded-lg p-3">
                          <p className="text-amber-900 text-sm">
                            <strong>‚ÑπÔ∏è Note :</strong> {dispositif.note}
                          </p>
                        </div>
                      )}
                    </div>
                  ))}
                </div>
              </>
            )}

            <button
              onClick={handleReset}
              className="w-full bg-indigo-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-indigo-700 transition-colors flex items-center justify-center"
            >
              <RotateCcw className="mr-2" size={20} />
              Recommencer le questionnaire
            </button>
          </div>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 p-4">
      <div className="max-w-3xl mx-auto">
        <div className="bg-white rounded-2xl shadow-xl p-8">
          <h1 className="text-3xl font-bold text-gray-800 mb-2">D√©couvrez les dispositifs d'accompagnement faits pour vous !</h1>
          <p className="text-gray-600 mb-6">En compl√©tant ce formulaire, vous nous aidez √† identifier l'accompagnement le plus adapt√© √† votre situation.</p>
          
          <div className="mb-6">
            <div className="flex justify-between text-sm text-gray-600 mb-2">
              <span>Question {step + 1} sur {questions.length}</span>
              <span>{Math.round(((step + 1) / questions.length) * 100)}%</span>
            </div>
            <div className="w-full bg-gray-200 rounded-full h-2">
              <div 
                className="bg-indigo-600 h-2 rounded-full transition-all duration-300"
                style={{ width: `${((step + 1) / questions.length) * 100}%` }}
              ></div>
            </div>
          </div>

          <div className="mb-8">
            <h2 className="text-xl font-semibold text-gray-800 mb-4">{currentQuestion.question}</h2>
            
            {currentQuestion.info && (
              <div className="mb-4 bg-blue-50 border border-blue-200 rounded-lg p-3">
                <p className="text-sm text-blue-700">üí° {currentQuestion.info}</p>
                {currentQuestion.id === 'qpv' && (
                  <a 
                    href="https://sig.ville.gouv.fr/" 
                    target="_blank" 
                    rel="noopener noreferrer"
                    className="inline-flex items-center text-blue-600 hover:text-blue-800 text-sm font-semibold mt-2"
                  >
                    V√©rifier si vous √™tes en QPV <ExternalLink size={14} className="ml-1" />
                  </a>
                )}
              </div>
            )}

            {currentQuestion.type === 'radio' && (
              <div className="space-y-3">
                {currentQuestion.options.map((option) => (
                  <label 
                    key={option}
                    className="flex items-center p-4 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"
                    style={{
                      borderColor: answers[currentQuestion.id] === option ? '#4f46e5' : '#e5e7eb',
                      backgroundColor: answers[currentQuestion.id] === option ? '#eef2ff' : 'white'
                    }}
                  >
                    <input
                      type="radio"
                      name={currentQuestion.id}
                      value={option}
                      checked={answers[currentQuestion.id] === option}
                      onChange={(e) => handleAnswer(currentQuestion.id, e.target.value)}
                      className="mr-3 w-5 h-5 text-indigo-600"
                    />
                    <span className="text-gray-700 font-medium">{option}</span>
                  </label>
                ))}
              </div>
            )}

            {currentQuestion.type === 'checkbox' && (
              <div className="space-y-3">
                {currentQuestion.options.map((option) => (
                  <label 
                    key={option}
                    className="flex items-center p-4 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"
                    style={{
                      borderColor: answers[currentQuestion.id]?.includes(option) ? '#4f46e5' : '#e5e7eb',
                      backgroundColor: answers[currentQuestion.id]?.includes(option) ? '#eef2ff' : 'white'
                    }}
                  >
                    <input
                      type="checkbox"
                      value={option}
                      checked={answers[currentQuestion.id]?.includes(option) || false}
                      onChange={(e) => {
                        const current = answers[currentQuestion.id] || [];
                        const newValue = e.target.checked
                          ? [...current, option]
                          : current.filter(item => item !== option);
                        handleAnswer(currentQuestion.id, newValue);
                      }}
                      className="mr-3 w-5 h-5 text-indigo-600 rounded"
                    />
                    <span className="text-gray-700 font-medium">{option}</span>
                  </label>
                ))}
              </div>
            )}

            {currentQuestion.type === 'text' && (
              <input
                type="text"
                placeholder={currentQuestion.placeholder}
                value={answers[currentQuestion.id] || ''}
                onChange={(e) => handleAnswer(currentQuestion.id, e.target.value)}
                className="w-full p-4 border-2 border-gray-300 rounded-lg focus:border-indigo-600 focus:outline-none text-lg"
              />
            )}

            {currentQuestion.type === 'number' && (
              <input
                type="number"
                placeholder={currentQuestion.placeholder}
                value={answers[currentQuestion.id] || ''}
                onChange={(e) => handleAnswer(currentQuestion.id, e.target.value)}
                className="w-full p-4 border-2 border-gray-300 rounded-lg focus:border-indigo-600 focus:outline-none text-lg"
              />
            )}
          </div>

          <div className="flex gap-4">
            {step > 0 && (
              <button
                onClick={handlePrevious}
                className="flex-1 bg-gray-200 text-gray-700 py-3 px-6 rounded-lg font-semibold hover:bg-gray-300 transition-colors"
              >
                Pr√©c√©dent
              </button>
            )}
            <button
              onClick={handleNext}
              disabled={!isAnswered}
              className="flex-1 bg-indigo-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-indigo-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center justify-center"
            >
              {step === questions.length - 1 ? 'Voir les r√©sultats' : 'Suivant'}
              <ChevronRight className="ml-2" size={20} />
            </button>
          </div>
        </div>
      </div>
    </div>
  );
};

export default EligibilityTool;
        //
    </script>
</body>
</html>
